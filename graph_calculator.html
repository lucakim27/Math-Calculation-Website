<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <script src="https://unpkg.com/mathjs@9.0.0/lib/browser/math.js"></script>
        <script src="https://cdn.plot.ly/plotly-1.35.2.min.js"></script>
        <style>
            body {
            margin: 0;
            }

            ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
            width: 10%;
            background-color: #98b4ad;
            position: fixed;
            height: 100%;
            overflow: auto;
            }

            li a {
            display: block;
            color: #000;
            padding: 8px 16px;
            text-decoration: none;
            }

            li a.active {
            background-color: #4CAF50;
            color: white;
            }

            li a:hover:not(.active) {
            background-color: rgb(212, 100, 8);
            color: white;
            }
        </style>
    </head>
    <body>

        <ul>
            <li><a href="/index">Home</a></li>
            <li><a href="/basic_calculator">Basic Calculator</a></li>
            <li><a href="/gcd&lcm_calculator">GCD & LCM Calculator</a></li>
            <li><a class="active" href="/graph_calculator">Graph Calculator</a></li>
            <li><a href="/enquiry">Enquiry</a></li>
        </ul>

        <center>
        <div style="margin-left:10%;padding:1px 16px;height:1000px;">
            <h2>Graph Calculator</h2>

            <form id="form">
                <label for="eq">Enter an equation:</label>
                <input type="text" id="eq" value="4 * sin(x) + 5 * cos(x/2)" />
                <input type="submit" value="Draw" />
              </form>
              
              <div id="plot"></div>
              
        </div>
        </center>

        <script>
            function draw() {
              try {
                // compile the expression once
                const expression = document.getElementById('eq').value
                const expr = math.compile(expression)
          
                // evaluate the expression repeatedly for different values of x
                const xValues = math.range(-10, 10, 0.5).toArray()
                const yValues = xValues.map(function (x) {
                  return expr.evaluate({x: x})
                })
          
                // render the plot using plotly
                const trace1 = {
                  x: xValues,
                  y: yValues,
                  type: 'scatter'
                }
                const data = [trace1]
                Plotly.newPlot('plot', data)
              }
              catch (err) {
                console.error(err)
                alert(err)
              }
            }
          
            document.getElementById('form').onsubmit = function (event) {
              event.preventDefault()
              draw()
            }
          
            draw()
          </script>
        
    </body>
</html>
